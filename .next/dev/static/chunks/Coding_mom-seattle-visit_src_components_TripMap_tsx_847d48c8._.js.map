{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/colinl/Coding/mom-seattle-visit/src/components/TripMap.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport { Activity } from '@/types/trip';\nimport { ExternalLink, MapPin, Clock, DollarSign, Star } from 'lucide-react';\nimport 'leaflet/dist/leaflet.css';\n\n// Location coordinates for cities\nconst cityCoordinates: Record<string, [number, number]> = {\n  seattle: [47.6062, -122.3321],\n  portland: [45.5152, -122.6784],\n  tacoma: [47.2529, -122.4443],\n  olympia: [47.0379, -122.9007],\n};\n\n// Activity venue coordinates (approximate)\nconst venueCoordinates: Record<string, [number, number]> = {\n  // Seattle venues\n  'McCaw Hall': [47.6246, -122.3512],\n  'Benaroya Hall': [47.6090, -122.3386],\n  'Seattle Art Museum': [47.6074, -122.3387],\n  'Seattle Asian Art Museum': [47.6305, -122.3145],\n  'Chihuly Garden and Glass': [47.6206, -122.3505],\n  'Frye Art Museum': [47.6083, -122.3239],\n  'Henry Art Gallery': [47.6567, -122.3109],\n  'Museum of Pop Culture (MoPOP)': [47.6215, -122.3481],\n  'Kubota Garden': [47.5127, -122.2695],\n  'Woodland Park Zoo': [47.6686, -122.3536],\n  'Volunteer Park': [47.6305, -122.3145],\n  'Pike Place Market': [47.6097, -122.3422],\n  'Space Needle': [47.6205, -122.3493],\n  'Washington Park Arboretum': [47.6392, -122.2970],\n  'Seattle Japanese Garden': [47.6367, -122.2970],\n  'National Nordic Museum': [47.6724, -122.3835],\n  'Wing Luke Museum': [47.5988, -122.3227],\n  'Town Hall Seattle': [47.6075, -122.3321],\n  // Portland venues\n  'Portland Art Museum': [45.5159, -122.6836],\n  'Portland Japanese Garden': [45.5190, -122.7082],\n  \"Powell's City of Books\": [45.5230, -122.6818],\n  'Oregon Convention Center': [45.5285, -122.6620],\n  'Lan Su Chinese Garden': [45.5256, -122.6729],\n  'Pittock Mansion': [45.5254, -122.7164],\n  'Arlene Schnitzer Concert Hall': [45.5176, -122.6832],\n  'Kimpton Riverplace Hotel': [45.5060, -122.6720],\n  // Nature\n  'Multnomah Falls': [45.5762, -122.1158],\n  'Latourell Falls': [45.5363, -122.2177],\n  // Tacoma\n  'Museum of Glass': [47.2455, -122.4308],\n  // Olympia\n  'Washington State Capitol': [47.0354, -122.9062],\n};\n\n// Custom marker icon\nconst createMarkerIcon = (color: string) => {\n  return L.divIcon({\n    className: 'custom-marker',\n    html: `<div style=\"\n      background: ${color};\n      width: 24px;\n      height: 24px;\n      border-radius: 50%;\n      border: 3px solid white;\n      box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n    \"></div>`,\n    iconSize: [24, 24],\n    iconAnchor: [12, 12],\n  });\n};\n\n// Category colors\nconst categoryColors: Record<string, string> = {\n  opera: '#9333ea',      // purple\n  symphony: '#4f46e5',   // indigo\n  art: '#ec4899',        // pink\n  nature: '#22c55e',     // green\n  sightseeing: '#f59e0b', // amber\n  food: '#ef4444',       // red\n  travel: '#3b82f6',     // blue\n};\n\ninterface TripMapProps {\n  activities: Activity[];\n  onActivityClick?: (activity: Activity) => void;\n}\n\n// Component to set map view\nfunction MapController({ center, zoom }: { center: [number, number]; zoom: number }) {\n  const map = useMap();\n  map.setView(center, zoom);\n  return null;\n}\n\nexport default function TripMap({ activities, onActivityClick }: TripMapProps) {\n  const [selectedCity, setSelectedCity] = useState<string | null>(null);\n\n  // Get unique locations from activities\n  const markers = useMemo(() => {\n    const seen = new Set<string>();\n    return activities\n      .map(activity => {\n        const coords = venueCoordinates[activity.venue] || cityCoordinates[activity.city];\n        if (!coords) return null;\n\n        // Avoid duplicate markers for same venue\n        const key = `${coords[0]},${coords[1]}`;\n        if (seen.has(key)) return null;\n        seen.add(key);\n\n        return {\n          activity,\n          coords,\n          color: categoryColors[activity.category] || '#6b7280',\n        };\n      })\n      .filter(Boolean) as { activity: Activity; coords: [number, number]; color: string }[];\n  }, [activities]);\n\n  // Route between cities (Seattle -> Portland)\n  const routeCoords: [number, number][] = [\n    cityCoordinates.seattle,\n    cityCoordinates.tacoma,\n    cityCoordinates.olympia,\n    cityCoordinates.portland,\n  ];\n\n  // Calculate center based on all markers\n  const center: [number, number] = useMemo(() => {\n    if (selectedCity && cityCoordinates[selectedCity]) {\n      return cityCoordinates[selectedCity];\n    }\n    // Default to center between Seattle and Portland\n    return [46.5607, -122.5];\n  }, [selectedCity]);\n\n  const zoom = selectedCity ? 12 : 8;\n\n  return (\n    <div className=\"relative h-full w-full rounded-xl overflow-hidden shadow-lg\">\n      {/* City filter buttons */}\n      <div className=\"absolute top-3 left-3 z-[1000] flex flex-wrap gap-2\">\n        <button\n          onClick={() => setSelectedCity(null)}\n          className={`px-3 py-1.5 rounded-full text-xs font-medium shadow-md transition-all ${\n            !selectedCity\n              ? 'bg-blue-500 text-white'\n              : 'bg-white text-gray-700 hover:bg-gray-100'\n          }`}\n        >\n          All\n        </button>\n        {Object.keys(cityCoordinates).map(city => (\n          <button\n            key={city}\n            onClick={() => setSelectedCity(selectedCity === city ? null : city)}\n            className={`px-3 py-1.5 rounded-full text-xs font-medium shadow-md transition-all capitalize ${\n              selectedCity === city\n                ? 'bg-blue-500 text-white'\n                : 'bg-white text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            {city}\n          </button>\n        ))}\n      </div>\n\n      <MapContainer\n        center={center}\n        zoom={zoom}\n        className=\"h-full w-full\"\n        scrollWheelZoom={true}\n      >\n        <MapController center={center} zoom={zoom} />\n\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n\n        {/* Route polyline */}\n        <Polyline\n          positions={routeCoords}\n          color=\"#3b82f6\"\n          weight={3}\n          opacity={0.6}\n          dashArray=\"10,10\"\n        />\n\n        {/* Activity markers */}\n        {markers.map(({ activity, coords, color }) => (\n          <Marker\n            key={activity.id}\n            position={coords}\n            icon={createMarkerIcon(color)}\n          >\n            <Popup className=\"custom-popup\" maxWidth={280}>\n              <div className=\"p-2\">\n                <h3 className=\"font-semibold text-gray-900 text-sm mb-1\">\n                  {activity.name}\n                </h3>\n                <p className=\"text-xs text-gray-600 mb-2\">{activity.venue}</p>\n\n                <div className=\"flex flex-wrap gap-2 text-xs text-gray-500 mb-2\">\n                  {activity.time && (\n                    <span className=\"flex items-center gap-1\">\n                      <Clock className=\"w-3 h-3\" />\n                      {activity.time}\n                    </span>\n                  )}\n                  {activity.price !== undefined && (\n                    <span className=\"flex items-center gap-1\">\n                      <DollarSign className=\"w-3 h-3\" />\n                      {activity.price === 0 ? 'Free' : `$${activity.seniorPrice || activity.price}`}\n                    </span>\n                  )}\n                  {activity.priority === 'must-do' && (\n                    <span className=\"flex items-center gap-1 text-amber-600\">\n                      <Star className=\"w-3 h-3 fill-amber-500\" />\n                      Must Do\n                    </span>\n                  )}\n                </div>\n\n                <div className=\"flex gap-2\">\n                  {onActivityClick && (\n                    <button\n                      onClick={() => onActivityClick(activity)}\n                      className=\"flex-1 text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition-colors\"\n                    >\n                      View Details\n                    </button>\n                  )}\n                  {activity.bookingUrl && (\n                    <a\n                      href={activity.bookingUrl}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"flex items-center gap-1 text-xs text-blue-600 hover:underline px-2 py-1\"\n                    >\n                      <ExternalLink className=\"w-3 h-3\" />\n                      Book\n                    </a>\n                  )}\n                </div>\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n\n        {/* City markers */}\n        {Object.entries(cityCoordinates).map(([city, coords]) => (\n          <Marker\n            key={`city-${city}`}\n            position={coords}\n            icon={L.divIcon({\n              className: 'city-marker',\n              html: `<div style=\"\n                background: #1f2937;\n                color: white;\n                padding: 4px 8px;\n                border-radius: 4px;\n                font-size: 11px;\n                font-weight: 600;\n                white-space: nowrap;\n                box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n              \">${city.charAt(0).toUpperCase() + city.slice(1)}</div>`,\n              iconSize: [60, 20],\n              iconAnchor: [30, 10],\n            })}\n          />\n        ))}\n      </MapContainer>\n\n      {/* Legend */}\n      <div className=\"absolute bottom-3 right-3 z-[1000] bg-white rounded-lg shadow-md p-2\">\n        <div className=\"text-xs font-medium text-gray-700 mb-1\">Categories</div>\n        <div className=\"grid grid-cols-2 gap-1\">\n          {Object.entries(categoryColors).slice(0, 5).map(([category, color]) => (\n            <div key={category} className=\"flex items-center gap-1.5\">\n              <div\n                className=\"w-3 h-3 rounded-full\"\n                style={{ background: color }}\n              />\n              <span className=\"text-[10px] text-gray-600 capitalize\">{category}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}